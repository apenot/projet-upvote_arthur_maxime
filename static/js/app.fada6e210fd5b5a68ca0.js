webpackJsonp([1],{BACb:function(e,t){},"Dk/i":function(e,t){},EywA:function(e,t){},ItPc:function(e,t){},MhFl:function(e,t,o){"use strict";var a=o("7+uW"),i=o("Sazm"),s=o.n(i),n=o("1mcD"),r=o.n(n);a.a.use(r.a);var c={apiKey:"AIzaSyBGlbmoiFO7_LR4BrRRmdEDijewDwdK4Aw",authDomain:"upvote-cf339.firebaseapp.com",databaseURL:"https://upvote-cf339.firebaseio.com",projectId:"upvote-cf339",storageBucket:"upvote-cf339.appspot.com",messagingSenderId:"481064603440"};t.a=s.a.initializeApp(c)},NHnr:function(e,t,o){"use strict";function a(e){o("oh2V")}function i(e){o("EywA")}function s(e){o("bB2o")}function n(e){o("ItPc")}function r(e){o("z5u7")}function c(e){o("BACb")}function l(e){o("Dk/i")}Object.defineProperty(t,"__esModule",{value:!0});var u=(o("Q00M"),o("7+uW")),d={name:"app",data:function(){return{}}},v=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container",attrs:{id:"app"}},[o("router-view")],1)},m=[],p={render:v,staticRenderFns:m},f=p,g=o("VU/8"),h=a,_=g(d,f,!1,h,null,null),b=_.exports,V=o("/ocq"),C=o("MhFl"),y=o("cvtl"),w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col-sm-6 col-md-6 col-lg-4 card-video"},[o("div",{staticClass:"card h-100 cursor-pointer",attrs:{"data-toggle":"modal","data-target":"#Lecture_"+e.videoID}},[o("img",{staticClass:"card-img-top",attrs:{src:e.videoThumbnails,alt:"minuiature"}}),e._v(" "),o("div",{staticClass:"card-body"},[o("h4",{staticClass:"card-title"},[e._v(e._s(e.videoTitle))]),e._v(" "),o("p",{staticClass:"card-text"},[e._v(e._s(e.videoChannelTitle)+" - "+e._s((new Intl.NumberFormat).format(e.videoNbVue))+" vues")]),e._v(" "),0==e.videoMoyenVote?o("div",[o("i",{staticClass:"fa fa-star fa-lg",attrs:{"aria-hidden":"true"}}),e._v(" -   \n            ")]):o("div",[o("i",{staticClass:"fa fa-star fa-lg",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.videoMoyenVote)+" / 5 \n            ")])])]),e._v(" "),o("div",{staticClass:"modal fade",attrs:{id:"Lecture_"+e.videoID,tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"true"}},[o("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v(e._s(e.videoTitle))]),e._v(" "),e._m(0,!1,!1)]),e._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"container-fluid"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"video-container"},[o("iframe",{attrs:{src:"https://www.youtube-nocookie.com/embed/"+e.videoID+"?showinfo=0",frameborder:"0",gesture:"media",allow:"encrypted-media",allowfullscreen:""}})])])]),e._v(" "),o("div",{staticClass:"row vote"},[o("div",{staticClass:"col-md-6"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.ratingShow,expression:"ratingShow"}],staticClass:"form-inline"},[o("select",{attrs:{id:"rate-"+e.videoID}},[o("option",{attrs:{value:""}}),e._v(" "),o("option",{attrs:{value:"1"}},[e._v("1")]),e._v(" "),o("option",{attrs:{value:"2"}},[e._v("2")]),e._v(" "),o("option",{attrs:{value:"3"}},[e._v("3")]),e._v(" "),o("option",{attrs:{value:"4"}},[e._v("4")]),e._v(" "),o("option",{attrs:{value:"5"}},[e._v("5")])])]),e._v(" "),o("div",{staticClass:"info-vote"},[o("span",[e._v("Moyenne vidéo: "+e._s(e.videoMoyenVote)+" / 5 "),o("i",{staticClass:"fa fa-star",attrs:{"aria-hidden":"true"}})]),e._v(" "),o("span",[e._v("Nombre de vote(s): "+e._s(e.videoNbVote))])])])])])]),e._v(" "),e._m(1,!1,!1)])])])])},N=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("button",{staticClass:"close cursor-pointer",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[o("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-secondary cursor-pointer",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Fermer")])])}],S={render:w,staticRenderFns:N},x=S,R=o("VU/8"),D=i,k=R(y.a,x,!1,D,null,null),U=k.exports,L={props:["value","index"],methods:{comptareNote:function(e,t){return null==e.nbVote||null==e.sommeVote||0===e.sommeVote||0===e.nbVote?e.moyenneVote=0:e.moyenneVote=e.sommeVote/e.nbVote,null==t.nbVote||null==t.sommeVote||0===t.sommeVote||0===t.nbVote?t.moyenneVote=0:t.moyenneVote=t.sommeVote/t.nbVote,e.moyenneVote<t.moyenneVote?1:e.moyenneVote>t.moyenneVote?-1:0}},data:function(){return{}},firebase:function(){return{videos:{source:C.a.database().ref("categories/"+this.value[".key"]+"/videos")}}},computed:{lastVideo:function(){return this.videos.sort(this.comptareNote).slice(0,3)}},components:{"my-video":U}},E=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[o("router-link",{attrs:{to:{name:"CategorieDetail",params:{slug:e.value.slug}}}},[e._v(e._s(e.value.nom))])],1),e._v(" "),o("div",{staticClass:"row card-deck"},e._l(e.lastVideo,function(t,a){return o("my-video",{key:a,attrs:{categorieKey:e.value[".key"],value:t,index:a}})}))])},I=[],A={render:E,staticRenderFns:I},j=A,M=o("VU/8"),B=s,F=M(L,j,!1,B,null,null),$=F.exports,T={data:function(){return{}},firebase:function(){return{categories:{source:C.a.database().ref("/categories")}}},computed:{},methods:{},filters:{},components:{"my-categorie":$}},z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pageHome"},e._l(e.categories,function(e,t){return o("my-categorie",{key:t,attrs:{value:e,index:t}})}))},P=[],K={render:z,staticRenderFns:P},q=K,W=o("VU/8"),H=n,O=W(T,q,!1,H,null,null),G=O.exports,J={props:["value","index"],computed:{categorie:function(){var e=this;return this.$root.categories.find(function(t){return String(t.slug)===String(e.$route.params.slug)})},videoInverse:function(){return this.videos.reverse()}},data:function(){return{videos:[]}},mounted:function(){this.loadData()},watch:{"$root.categories":function(){this.loadData()}},methods:{loadData:function(){this.$bindAsArray("videos",C.a.database().ref("categories/"+this.categorie[".key"]+"/videos"))}},components:{"my-video":U}},Q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v(e._s(e.categorie.nom))]),e._v(" "),o("div",{staticClass:"row"},e._l(e.videoInverse,function(t,a){return o("my-video",{key:a,attrs:{categorieKey:e.categorie[".key"],value:t,index:a}})}))])},X=[],Y={render:Q,staticRenderFns:X},Z=Y,ee=o("VU/8"),te=r,oe=ee(J,Z,!1,te,null,null),ae=oe.exports,ie=o("PBfN"),se=o.n(ie),ne={data:function(){return{categorieNom:"",categorieSlug:""}},firebase:function(){return{categories:{source:C.a.database().ref("/categories")}}},methods:{ajoutCategorie:function(){""===this.categorieNom||""===this.categorieSlug?se()("Champs incomplets!","Veuillez remplir tous les champs!","error"):-1!==this.categorieSlug.indexOf(" ")?se()("Erreur!","Erreur le slug contient un espace!","error"):(this.$firebaseRefs.categories.push({slug:this.categorieSlug,nom:this.categorieNom}),se()("Catégorie ajoutée!","La catégorie a été enregistré avec succès!","success").then(function(e){window.location.replace("./")}))}}},re=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12 col-md-8 col-lg-6 col-lx-4 mx-auto"},[o("h2",[e._v("Ajouter une categorie")]),e._v(" "),o("form",{attrs:{action:"javascript:void(0);"}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"nomCat"}},[e._v("Nom")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.categorieNom,expression:"categorieNom"}],staticClass:"form-control",attrs:{id:"nomCat",placeholder:"Catégorie",required:""},domProps:{value:e.categorieNom},on:{input:function(t){t.target.composing||(e.categorieNom=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"nomSlug"}},[e._v("Slug")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.categorieSlug,expression:"categorieSlug"}],staticClass:"form-control",attrs:{id:"nomSlug",placeholder:"Slug",required:""},domProps:{value:e.categorieSlug},on:{input:function(t){t.target.composing||(e.categorieSlug=t.target.value)}}})]),e._v(" "),o("button",{staticClass:"btn btn-primary",on:{click:function(t){e.ajoutCategorie()}}},[e._v("Enregistrer")])])])])},ce=[],le={render:re,staticRenderFns:ce},ue=le,de=o("VU/8"),ve=c,me=de(ne,ue,!1,ve,null,null),pe=me.exports,fe={data:function(){return{videoURL:"",videoCategorie:""}},firebase:function(){return{categories:{source:C.a.database().ref("/categories/")}}},methods:{urlShortener:function(e){return e.substr(32)},ajoutVideo:function(){""===this.videoURL||null==this.videoCategorie[".key"]?se()("Champs incomplets!","Veuillez remplir tous les champs!","error"):(C.a.database().ref("/categories/"+this.videoCategorie[".key"]+"/videos").push({url:this.urlShortener(this.videoURL)}),se()("Vidéo enregistrée!","La vidéo a été enregistré avec succès!","success").then(function(e){window.location.replace("./")}))}}},ge=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"row center-row"},[o("div",{staticClass:"col-sm-12 col-md-8 col-lg-6 col-lx-4 mx-auto"},[o("h2",[e._v("Proposer une vidéo")]),e._v(" "),o("form",{attrs:{action:"javascript:void(0);"}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"urlVid"}},[e._v("URL de votre vidéo")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.videoURL,expression:"videoURL"}],staticClass:"form-control",attrs:{id:"urlVid",placeholder:"URL",required:""},domProps:{value:e.videoURL},on:{input:function(t){t.target.composing||(e.videoURL=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"catVid"}},[e._v("Catégorie")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.videoCategorie,expression:"videoCategorie"}],staticClass:"form-control",attrs:{id:"catVid",required:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.videoCategorie=t.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v("Veuillez sélectionner une catégorie")]),e._v(" "),e._l(e.categories,function(t,a){return o("option",{key:a,attrs:{index:a},domProps:{value:t}},[e._v("\n                         "+e._s(e.categories[a].nom)+"\n                         ")])})],2)]),e._v(" "),o("button",{staticClass:"btn btn-primary",on:{click:function(t){e.ajoutVideo()}}},[e._v("Enregistrer")])])])])},he=[],_e={render:ge,staticRenderFns:he},be=_e,Ve=o("VU/8"),Ce=l,ye=Ve(fe,be,!1,Ce,null,null),we=ye.exports;u.a.use(V.a);var Ne=new V.a({routes:[{path:"/",name:"Home",component:G},{path:"/categorie/:slug",name:"CategorieDetail",component:ae},{path:"/ajoutCat/",name:"CategorieAjout",component:pe},{path:"/ajoutVid/",name:"VideoAjout",component:we}]}),Se=(o("qb6w"),o("Bb4J"),o("y9Wp"),o("UdIB"),o("Sazm")),xe=o.n(Se);u.a.config.productionTip=!1,new u.a({el:"#app",router:Ne,template:"<App/>",components:{App:b},data:function(){return{}},firebase:function(){return{categories:{source:xe.a.database().ref("/categories")}}},methods:{}})},Q00M:function(e,t){},UdIB:function(e,t){},bB2o:function(e,t){},cvtl:function(e,t,o){"use strict";(function(e){var a=o("mtWM"),i=o.n(a),s=o("KvmG"),n=(o.n(s),o("PBfN")),r=o.n(n),c=o("MhFl");t.a={props:["value","index","categorieKey"],data:function(){return{ratingShow:!0,videoID:this.value.url,videoThumbnails:"",videoURL:"https://www.youtube.com/watch?v="+this.value.url,videoNbVue:0,videoTitle:"",videoChannelTitle:"",videoDescription:""}},methods:{loadData:function(){var e=this;i.a.get("https://www.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails%2C+statistics+&id="+this.videoID+"&key=AIzaSyBGlbmoiFO7_LR4BrRRmdEDijewDwdK4Aw").then(function(t){e.videoTitle=t.data.items[0].snippet.title,e.videoDescription=t.data.items[0].snippet.description,e.videoChannelTitle=t.data.items[0].snippet.channelTitle,e.videoThumbnails=t.data.items[0].snippet.thumbnails.medium.url,e.videoNbVue=t.data.items[0].statistics.viewCount,e.dataLoaded=!0}).catch(function(e){console.log(e)})},addVote:function(e){this.setNbVote(this.videoNbVote+1),this.setSommeVote(this.videoSommeVote+Number(e)),this.ratingShow=!1},setSommeVote:function(e){c.a.database().ref("/categories/"+this.categorieKey+"/videos/"+this.value[".key"]+"/sommeVote").set(e)},setNbVote:function(e){c.a.database().ref("/categories/"+this.categorieKey+"/videos/"+this.value[".key"]+"/nbVote").set(e)},intiRating:function(){var t=this;e("#rate-"+this.videoID).barrating({theme:"fontawesome-stars",allowEmpty:null,onSelect:function(e,o){r()("Vote enregistré!","Merci ! Votre vote a été enregistré avec succès! ","success"),t.addVote(e)}})}},mounted:function(){this.loadData(),this.intiRating()},computed:{videoMoyenVote:function(){return null==this.value.nbVote||0===this.value.nbVote||null==this.value.sommeVote||0===this.value.sommeVote?0:Math.round(this.value.sommeVote/this.value.nbVote*10)/10},videoNbVote:function(){return null==this.value.nbVote?0:this.value.nbVote},videoSommeVote:function(){return null==this.value.sommeVote?0:this.value.sommeVote}}}}).call(t,o("7t+N"))},oh2V:function(e,t){},qb6w:function(e,t){},y9Wp:function(e,t){},z5u7:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.fada6e210fd5b5a68ca0.js.map